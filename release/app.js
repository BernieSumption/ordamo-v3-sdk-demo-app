!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},n={},i={},o={}.hasOwnProperty,a=/^\.\.?(\/|$)/,r=function(e,t){for(var n,i=[],o=(a.test(t)?e+"/"+t:t).split("/"),r=0,s=o.length;r<s;r++)n=o[r],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t){return function(n){var i=r(s(t),n);return e.require(i,t)}},u=function(e,t){var i=null;i=f&&f.createHot(e);var o={id:e,exports:{},hot:i};return n[e]=o,t(o.exports,c(e),o),o.exports},l=function(e){return i[e]?l(i[e]):e},d=function(e,t){return l(r(s(e),t))},h=function(e,i){null==i&&(i="/");var a=l(e);if(o.call(n,a))return n[a].exports;if(o.call(t,a))return u(a,t[a]);throw new Error("Cannot find module '"+e+"' from '"+i+"'")};h.alias=function(e,t){i[t]=e};var p=/\.[^.\/]+$/,m=/\/index(\.[^\/]+)?$/,g=function(e){if(p.test(e)){var t=e.replace(p,"");o.call(i,t)&&i[t].replace(p,"")!==t+"/index"||(i[t]=e)}if(m.test(e)){var n=e.replace(m,"");o.call(i,n)||(i[n]=e)}};h.register=h.define=function(e,i){if("object"==typeof e)for(var a in e)o.call(e,a)&&h.register(a,e[a]);else t[e]=i,delete n[e],g(e)},h.list=function(){var e=[];for(var n in t)o.call(t,n)&&e.push(n);return e};var f=e._hmr&&new e._hmr(d,h,t,n);h._cache=n,h.hmr=f&&f.wrap,h.brunch=!0,e.require=h}}(),function(){var e=(window,function(e,t,n){var i={},o=function(t,n){var a;try{return a=e(n+"/node_modules/"+t)}catch(r){if(r.toString().indexOf("Cannot find module")===-1)throw r;if(n.indexOf("node_modules")!==-1){var s=n.split("/"),c=s.lastIndexOf("node_modules"),u=s.slice(0,c).join("/");return o(t,u)}}return i};return function(a){if(a in t&&(a=t[a]),a){if("."!==a[0]&&n){var r=o(a,n);if(r!==i)return r}return e(a)}}});require.register("ordamo-v3-sdk/lib/index.js",function(t,n,i){n=e(n,{},"ordamo-v3-sdk"),function(){"use strict";function e(){return g}function n(e){if(1!==g)throw new Error(e);console.error(e)}function i(e){return Object.assign({type:"image"},e)}function o(e){return Object.assign({type:"text"},e)}function a(e){return Object.assign({type:"number"},e)}function r(e){return e.items=Object.assign({type:"text"},e.items),Object.assign({type:"list"},e)}function s(e){return e.items=Object.assign({type:"image"},e.items),Object.assign({type:"list"},e)}function c(e){return e.items=Object.assign({type:"number"},e.items),Object.assign({type:"list"},e)}function u(e,t){var n;return t&&(n=t.getBoundingClientRect()),{eventType:"interactions",touchEvents:e.map(function(e){return l(e,n)})}}function l(e,t){var n=Array.prototype.slice.call(e.touches),i=Array.prototype.slice.call(e.changedTouches);return{type:e.type,touches:n.map(function(e){return d(e,t)}),changedTouches:i.map(function(e){return d(e,t)}),altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}}function d(e,t){var n=e.clientX,i=e.clientY;return t&&(n-=t.left,i-=t.top),{identifier:e.identifier,clientX:n,clientY:i}}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.log.apply(console,["Ordamo SDK: "+e].concat(t))}function p(){function e(e,i){for(var o=[],r=0;r<e;r++){if(t(),a){var s=window.innerWidth/2-v,c=window.innerHeight/2-y,u=Math.sqrt(s*s+c*c);u<p&&(f++,t())}isNaN(n.rotation)&&(_=90*g),o.push(i()),g++}return o}function t(){v=u+p+m*((g+f)%l),y=u+p+m*Math.floor((g+f)/l)}var n={};document.location.href.replace(/[?&]([^=]+)=([^&]*)?/g,function(e,t,i){return n[t]=parseInt(i)}),n.rotation%90&&(console.error("You have set rotation="+n.rotation+" - the SDK only supports rotations that are a multiple of 90 degrees"),n.rotation=90*Math.round(n.rotation/90));var i=isNaN(n.plateSpots)?2:n.plateSpots,o=isNaN(n.contentAreas)?1:n.contentAreas,a=n.avoidCentre?1:0,r=window.innerWidth,s=window.innerHeight,c=12,u=20,l=Math.min(3,i+o+a),d=Math.ceil((i+o+a)/l),p=Math.min((r-u*(l+1))/l,(s-u*(d+1))/d)/2,m=u+2*p;h("Making mock layout "+r+"x"+s+"px (~ "+Math.round(r/c)+"x"+Math.round(s/c)+"cm) with "+i+" plate spots and "+o+" content areas"+(a?" and keeping the centre clear":"")+". Control the layout with URL parameters like so: ?plateSpots=4&contentAreas=2&rotation=0&avoidCentre=1");var g=0,f=0,v=0,y=0,_=n.rotation;return{widthPx:r,heightPx:s,resolutionPixelsPerCm:c,plateSpots:e(i,function(){return{type:"circle",id:g,x:v,y:y,radius:p,rotationDegrees:_,borderWidth:p/10}}),contentAreas:e(o,function(){return{type:"rectangle",id:g,x:v,y:y,width:2*p,height:2*p,rotationDegrees:_}})}}function m(){var e,t=!1,n=function(e){e.preventDefault(),e.stopPropagation()},i=function(i){return function(o){if("INPUT"!==o.target.nodeName){if(n(o),0!==o.button||t)return;if("mousedown"===o.type&&(e=o.target,e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentElement)),!e)return;var a=new Touch({identifier:1,target:e,clientX:o.clientX,clientY:o.clientY,pageX:o.pageX,pageY:o.pageY,screenX:o.screenX,screenY:o.screenY}),r=new TouchEvent(i,{touches:"mouseup"===o.type?[]:[a],targetTouches:"mouseup"===o.type?[]:[a],changedTouches:[a],ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,altKey:o.altKey,metaKey:o.metaKey,bubbles:!0,cancelable:!0});e.dispatchEvent(r)}"mouseup"===o.type&&(e=null)}},o=function(e){e.isTrusted&&(window.removeEventListener("touchstart",o,!0),t=!0)};window.addEventListener("touchstart",o,!0),window.addEventListener("mousedown",i("touchstart"),!0),window.addEventListener("mousemove",i("touchmove"),!0),window.addEventListener("mouseup",i("touchend"),!0),window.addEventListener("click",n,!0),window.addEventListener("mouseenter",n,!0),window.addEventListener("mouseleave",n,!0),window.addEventListener("mouseout",n,!0),window.addEventListener("mouseover",n,!0)}var g;g="undefined"==typeof window?3:window===top?2:1;var f=!1,v=600;t.getRunningMode=e;var y=function(){function e(e){if(this._sentReadyEvent=!1,this._savedState=null,f&&3!==g)throw new Error("Only one instance of OrdamoSDK may be created per application "+g);f=!0,this.onInteractions=e.onInteractions,this.onNavigate=e.onNavigate,this._contentSchema=e.contentSchema,this._initCallback=e.initCallback,this._saveStateCallback=e.saveStateCallback,this._fullscreen=e.fullscreen,this._initialise()}return e.prototype._initialise=function(){var e=this;if(3!==g){if("complete"!==document.readyState)return void document.addEventListener("readystatechange",function(){"complete"===document.readyState&&e._initialise()});2===g?this._initialiseDevelopmentMode():1===g&&this._initialiseHostedMode(),this._startTouchEmulation()}},e.prototype._getSavedStateKey=function(){return"ordamo-sdk-content-"+document.location.pathname},e.prototype.notifyAppIsReady=function(){if(!this._initMessage)throw new Error("Illegal call to notifyAppIsReady() before init callback has fired.");this._sentReadyEvent||(this._sentReadyEvent=!0,1===g&&this._sendParentMessage({eventType:"ready"}))},e.prototype.getContent=function(){return this._requireInitMessage(),this._content},e.prototype.getLayout=function(){return this._requireInitMessage(),this._initMessage.layout},e.prototype.getTableLabel=function(){return this._requireInitMessage(),this._initMessage.table},e.prototype.getRequiredWidth=function(){return this._requireInitMessage(),this._initMessage.requiredWidth},e.prototype.getRequiredHeight=function(){return this._requireInitMessage(),this._initMessage.requiredHeight},e.prototype.getSavedState=function(){return this._requireInitMessage(),this._savedState},e.prototype.requestAppClose=function(){1===g?this._sendParentMessage({eventType:"close"}):2===g&&(document.body.style.transition="opacity 1s, background 1s, visibility 0s linear 1s",document.body.style.opacity="0",document.documentElement.style.background="#FFF",document.body.style.visibility="hidden",h("The app has been closed. In a hosted application, the user would now be seeing the main menu.")),this._saveStateCallback&&this._saveState()},e.prototype.setRemUnitDiameterOfPlateSpot=function(e){this._requireInitMessage();var t=this._initMessage.layout.plateSpots[0];t&&(document.documentElement.style.fontSize=2*t.radius/e+"px")},e.prototype._handleParentMessage=function(e){var t=e.data;"init"===t.eventType&&(this._initMessage?console.error("Second init message sent, ignoring"):this._receiveInitMessage(t)),"interactions"===t.eventType&&this.onInteractions&&this.onInteractions(t),"navigate"===t.eventType&&this.onNavigate&&this.onNavigate(t)},e.prototype._initialiseHostedMode=function(){window.addEventListener("message",this._handleParentMessage.bind(this));var e={eventType:"load",fullscreen:!!this._fullscreen};this._sendParentMessage(e)},e.prototype._sendParentMessage=function(e){parent.postMessage(e,"*")},e.prototype._initialiseDevelopmentMode=function(){h("running in development mode.");var e=navigator.vendor&&0===navigator.vendor.indexOf("Google"),t=/\bChrome\/(\d+)/.exec(navigator.userAgent);if(!(e&&t&&parseInt(t[1])>=46))throw alert("Sorry, Ordamo V3 apps require a recent version of Google Chrome to run. Please load this app in Chrome, and/or ensure that your copy of Chrome is up to date."),new Error("Bad browser: "+navigator.vendor+" "+navigator.userAgent);if(0===location.href.indexOf("file:"))throw alert('Ordamo V3 apps must be run from a web server to function correctly - the address must start "http:" or "https:", not "file:".'),new Error("Bad browser: "+navigator.vendor+" "+navigator.userAgent);var n=p();if(this._receiveInitMessage({eventType:"init",content:null,layout:n,table:"1",version:"0."+Math.round(99999*Math.random())+"-MOCKVERSION-SDK-DEVMODE",sessionId:1,requiredWidth:800,requiredHeight:600}),document.location.search.match(/\bmanualFullscreen=true/)){var i=function(){document.webkitFullscreenEnabled&&!document.webkitFullscreenElement&&document.body.webkitRequestFullScreen()};document.body.addEventListener("click",i),document.body.addEventListener("touchstart",i)}},e.prototype._requireInitMessage=function(){if(!this._initMessage)throw new Error("The SDK has not initialised yet.")},e.prototype._receiveInitMessage=function(e){return this._initMessage?void n("Duplicate init message received, ignoring"):(this._initMessage=e,this._restoreState(),void(e.content||!this._contentSchema?this._finishInitialisation():this._loadDefaultContentFile()))},e.prototype._finishInitialisation=function(){var e=this;if(this._contentSchema){this._content=JSON.parse(JSON.stringify(this._contentSchema));for(var t in this._content)this._content[t].value=this._initMessage.content[t]}this._initCallback&&this._initCallback();var n=5;setTimeout(function(){e._sentReadyEvent||console.error("WARNING: this app is taking too long to be ready. It should render in less than "+n+" seconds then call notifyAppIsReady().")},1e3*n)},e.prototype._loadDefaultContentFile=function(){var e=this,t="default-content.json?version="+encodeURIComponent(this._initMessage.version),n=new XMLHttpRequest;n.open("GET",t,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var i=void 0;try{i=JSON.parse(n.responseText)}catch(o){console.error(t+" is not a valid JSON file, check the console for more info"),console.error(o),h("This content is not JSON",n.responseText)}i&&(e._initMessage.content=i,e._finishInitialisation())}else console.error('Failed to load "'+t+'", is the development server running (npm start)')},n.send()},e.prototype._saveState=function(){if(this._saveStateCallback){var e={timestamp:Date.now(),state:this._saveStateCallback(),appVersion:this._initMessage.version,sessionId:this._initMessage.sessionId};sessionStorage.setItem(this._getSavedStateKey(),JSON.stringify(e))}},e.prototype._restoreState=function(){var e=sessionStorage.getItem(this._getSavedStateKey());if(e)try{var t=JSON.parse(e);t.appVersion!==this._initMessage.version?(h('Ignoring saved state, app version has changed from "'+t.appVersion+'" to "'+this._initMessage.version+'".'),this._clearState()):t.sessionId!==this._initMessage.sessionId?(h("Ignoring saved state, session has changed."),this._clearState()):Date.now()-t.timestamp>1e3*v?(h("Ignoring saved state older than "+v+" seconds."),this._clearState()):this._savedState=t.state}catch(n){console.error("Error parsing save data, wiping saved state",n,e),this._clearState()}},e.prototype._clearState=function(){sessionStorage.removeItem(this._getSavedStateKey())},e.prototype._startTouchEmulation=function(){var e=this;m(),2!==g||this._fullscreen||h("Supressing touch events because this app is not fullscreen. Background apps can use OrdamoSDK.onInteractions instead.");var t=function(t){e._fullscreen||(t.stopPropagation(),t.preventDefault()),e.onInteractions&&e.onInteractions(u([t]))};document.body.addEventListener("touchstart",t,!0),document.body.addEventListener("touchmove",t,!0),document.body.addEventListener("touchend",t,!0)},e}();t.OrdamoSDK=y,t.image=i,t.text=o,t.number=a,t.textList=r,t.imageList=s,t.numberList=c,t.AUTO_METADATA="ORDAMO_V3_SDK_AUTO_METADATA",t.makeInteractionsMessage=u,t.makeCrossWindowTouchEvent=l,t.makeCrossWindowTouch=d,t.startTouchEventEmulation=m}()}),require.register("content-schema.ts",function(e,t,n){"use strict";function i(){return a}var o=t("ordamo-v3-sdk"),a={image:o.image({title:"Single image",helpText:"An image with width and height between 50 and 250 pixels",minWidth:50,maxWidth:250,minHeight:50,maxHeight:250}),imageList:o.imageList({title:"List of images",helpText:"A list of 0-10 images in which each image's must be 2:1 aspect and between 100x200 and 400x800 pixels",minCount:0,maxCount:10,items:{minWidth:100,maxWidth:400,minHeight:200,maxHeight:800,aspectRatio:2}}),video:o.image({title:"Single video",helpText:"A video with width and height between 50 and 250 pixels",minWidth:50,maxWidth:250,minHeight:50,maxHeight:250,isVideo:!0}),videoList:o.imageList({title:"List of videos",helpText:"A list of videos, each with width and height between 50 and 250 pixels",minCount:0,maxCount:10,items:{minWidth:50,maxWidth:250,minHeight:50,maxHeight:250,isVideo:!0}}),number:o.number({title:"A number",helpText:"A round integer between -10 and 10 inclusive",integer:!0,minValue:-10,maxValue:10}),numberList:o.numberList({title:"A list of numbers",helpText:"A list of up to 20 numbers with no constraints on value",minCount:0,maxCount:20,items:{integer:!1}}),text:o.text({title:"Bit of text",helpText:"A text string between 1 and 50 characters long",minLength:0,maxLength:50,multiline:!1}),textList:o.textList({title:"List of text blocks",helpText:"A list of 0-10 text blocks between 1 and 2000 characters long",minCount:0,maxCount:10,items:{minLength:1,maxLength:2e3,multiline:!0}})};Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i}),require.register("default-content.ts",function(e,t,n){"use strict";function i(){return{image:"default-content/husky.jpg",imageList:["default-content/birthday.jpg","default-content/curiosity.jpg"],text:"Here's a message!",textList:["I'm a little teapot\nshort and stout","here's my handle\nhere's my spout","When I get all steamed up\nI just shout","Tip me over and pour me out"],video:"default-content/video.mp4",videoList:["default-content/video.ogv","default-content/video.webm"],number:3,numberList:[4,5,42,65537,Math.pow(2,16),2.685452]}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i}),require.register("index.ts",function(e,t,n){"use strict";function i(){var e=g.getContent();u(e.image.title,"content-image-title"),l(e.image,"content-image-spec"),s(o,e.image.value,"content-image",!0),u(e.imageList.title,"content-image-list-title"),l(e.imageList,"content-image-list-spec"),c(o,e.imageList.value,"content-image-list",!0),u(e.text.title,"content-text-title"),l(e.text,"content-text-spec"),s(r,e.text.value,"content-text"),u(e.textList.title,"content-text-list-title"),l(e.textList,"content-text-list-spec"),c(r,e.textList.value,"content-text-list"),u(e.video.title,"content-video-title"),l(e.video,"content-video-spec"),s(a,e.video.value,"content-video",!0),u(e.videoList.title,"content-video-list-title"),l(e.videoList,"content-video-list-spec"),c(a,e.videoList.value,"content-video-list",!0),u(e.number.title,"content-number-title"),l(e.number,"content-number-spec"),s(r,e.number.value,"content-number"),u(e.numberList.title,"content-number-list-title"),l(e.numberList,"content-number-list-spec"),c(r,e.numberList.value,"content-number-list"),h(),d(),g.notifyAppIsReady()}function o(e){var t=new Image;return t.src=e,t}function a(e){var t=document.createElement("video");return t.src=e,t.controls=!0,t}function r(e,t){void 0===t&&(t="text-content");var n=document.createElement("span");return n.textContent=e,n.className=t,n}function s(e,t,n,i){void 0===i&&(i=!1),document.getElementById(n).appendChild(r("Content from default-content.json:")),i&&document.getElementById(n).appendChild(r(String(t),"label")),document.getElementById(n).appendChild(e(t))}function c(e,t,n,i){void 0===i&&(i=!1),document.getElementById(n).appendChild(r("Content from default-content.json:"));var o=document.getElementById(n);t.forEach(function(t){i&&o.appendChild(r(String(t),"label")),o.appendChild(e(t))})}function u(e,t){document.getElementById(t).appendChild(r(e))}function l(e,t){u("Field spec in content-schema.json:",t),document.getElementById(t).appendChild(r(JSON.stringify(Object.assign({},e,{value:void 0}),null,"    ")))}function d(){var e=g.getLayout(),t=document.getElementById("plate-spot-canvas");t.width=e.widthPx,t.height=e.heightPx;var n=t.getContext("2d");n.fillStyle="#F9B";for(var i=0,o=e.plateSpots;i<o.length;i++){var a=o[i];n.beginPath(),n.ellipse(a.x,a.y,a.radius,a.radius,0,0,2*Math.PI),n.fill()}n.fillStyle="#9BF";for(var r=0,s=e.contentAreas;r<s.length;r++){var c=s[r];n.save(),n.translate(c.x,c.y),n.rotate(c.rotationDegrees/180*Math.PI),n.fillRect(-c.width/2,-c.height/2,c.width,c.height),n.restore()}}function h(){document.getElementById("plate-spot-link").addEventListener("touchstart",function(e){document.location.href=e.currentTarget.href}),document.getElementById("request-app-close-button").addEventListener("touchstart",function(e){g.requestAppClose()})}var p=t("ordamo-v3-sdk"),m=t("./content-schema"),g=new p.OrdamoSDK({initCallback:i,contentSchema:m["default"](),fullscreen:!0})}),require.register("metadata.ts",function(e,t,n){"use strict";function i(){return{id:o.AUTO_METADATA,version:o.AUTO_METADATA,description:o.AUTO_METADATA,defaultIconSrc:"menu-icons/default-app-icon.png",menuNodes:[{iconSrc:"menu-icons/button-1.png",navigateButtonId:"button-1"},{iconSrc:"menu-icons/parent.png",children:[{iconSrc:"menu-icons/button-2.png",navigateButtonId:"button-2"},{iconSrc:"menu-icons/button-3.png",navigateButtonId:"button-3"}]},{iconSrc:"menu-icons/close.png",closeMenu:!0}]}}var o=t("ordamo-v3-sdk");Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i}),require.alias("ordamo-v3-sdk/lib/index.js","ordamo-v3-sdk"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");